language: java
dist: trusty

before_install:
  - rm -rf $HOME/.m2/repository/io/vlingo
  - cp .travis/settings.xml $HOME/.m2/settings.xml

script:
  - mvn install

before_cache:
  - rm -rf $HOME/.m2/repository/io/vlingo
cache:
  directories:
    - $HOME/.m2/repository

deploy:
  - provider: script
    script: "mvn deploy -DskipTests"
    skip_cleanup: true
    on:
      tags: true
  - provider: script
    script: "mvn deploy -DskipTests"
    skip_cleanup: true
    on:
      branch: master

after_deploy:
  - chmod u+x .travis/trigger_deps.sh
  - if [ -n "$TRAVIS_TAG" ]; then .travis/trigger_deps.sh; fi

notifications:
  slack:
    secure: lNSPvEgp04FMMX+zZEB+0r8CS4BX/VCdLVd+nhwPTKDRomPISLToBuq/a/5Q8gTU2LpJ0QNpsdt/zTlN+Pe8t89vCCnsk+fAZ84jZNAfy8ahmZ2KRRT7eIbsZKQ0uN6eNfsjJ9JSgUb98LRcKHP93fX356NOiJeDmUDTqgm4/b4Uq8Swo1J9AslexZqvuzpMFRjjH35gdTtFAWDZ3lCw1b7n4HbQybMZbqxAc5R4prEMPTX1XieMHLo/JWKv4bje189zLzOPhaKsLD/D3CixjdzWAYlW10l662NavM3xlYmgVjQCsVwgtcGb/3w2yl5JRqfvpkW3YEZpmZ14p173o3OQCjo2VjklA2SZRpjz+6E2+1he6rwQYoIGoOde+sD0uUBTUpKExYBv8ecxos/3DDCkX1GF4AkQX79oMKqvT4lniNnZ7zhWdfTk1IyAUdvfblWWVPQ3cdsOB2dK19NHazZ0JONuoMlBeJ5k4OJY+m/7W5q+AZ1n91tBbiN/7y0KLkGtfQESxPJjrArySIez64q/AoNI0FWVh4lSSlZUCmE/ixDD4zjSyoav8FXB/4yDtRD1HyO9pJeBBlsj04F+TS9XucJ1gzWipculj3jJQGh+GaUAFesfFUxS6pmIyZXuSF6/oOP0Lc/yxRTAnVzKHFIXq6Siv4DwwgrgKcvoGgk=
